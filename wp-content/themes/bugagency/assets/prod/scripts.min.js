/******/ (function() { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./assets/js/scripts.js":
/*!******************************!*\
  !*** ./assets/js/scripts.js ***!
  \******************************/
/***/ (function() {

document.addEventListener('DOMContentLoaded', function () {
  var header = document.querySelector('header');
  var headerContainer = document.querySelector('.header-container');
  var lastScrollTop = 0;
  var ticking = false;
  var scrollTimeout;
  function updateHeader() {
    var scrollTop = window.pageYOffset || document.documentElement.scrollTop;
    if (scrollTop > 110) {
      header.classList.add("scrolled");
    } else if (scrollTop < 90) {
      header.classList.remove("scrolled");
    }
    lastScrollTop = scrollTop <= 0 ? 0 : scrollTop;
    ticking = false;
  }
  function throttleScroll() {
    if (!ticking) {
      requestAnimationFrame(updateHeader);
      ticking = true;
    }
    clearTimeout(scrollTimeout);
    scrollTimeout = setTimeout(function () {
      if (!ticking) {
        requestAnimationFrame(updateHeader);
        ticking = true;
      }
    }, 150);
  }
  window.addEventListener("scroll", throttleScroll, {
    passive: true
  });
  var mobileMenuToggle = document.querySelector('.mobile-menu-toggle');
  var menuItems = document.querySelector('.menu-items');
  function closeMobileMenu() {
    if (headerContainer) {
      headerContainer.style.transition = 'box-shadow 0.3s ease, border-radius 0.3s ease';
      headerContainer.style.boxShadow = '';
      headerContainer.style.borderBottomLeftRadius = '';
      headerContainer.style.borderBottomRightRadius = '';
    }
    mobileMenuToggle.classList.remove('active');
    setTimeout(function () {
      menuItems.classList.remove('active');
      setTimeout(function () {
        document.body.style.overflow = 'auto';
      }, 150);
    }, 10);
  }
  if (mobileMenuToggle && menuItems) {
    mobileMenuToggle.addEventListener('click', function () {
      var isActive = menuItems.classList.contains('active');
      if (isActive) {
        closeMobileMenu();
      } else {
        if (headerContainer) {
          headerContainer.style.transition = 'box-shadow 0.3s ease, border-radius 0.3s ease';
          headerContainer.style.boxShadow = 'none';
          headerContainer.style.borderBottomLeftRadius = '0';
          headerContainer.style.borderBottomRightRadius = '0';
        }
        mobileMenuToggle.classList.add('active');
        setTimeout(function () {
          menuItems.classList.add('active');
          setTimeout(function () {
            document.body.style.overflow = 'hidden';
          }, 150);
        }, 10);
      }
    });
    var menuLinks = menuItems.querySelectorAll('a');
    menuLinks.forEach(function (link) {
      link.addEventListener('click', function () {
        closeMobileMenu();
      });
    });
    document.addEventListener('click', function (e) {
      if (!header.contains(e.target) && menuItems.classList.contains('active')) {
        closeMobileMenu();
      }
    });
    window.addEventListener('resize', function () {
      if (window.innerWidth > 768) {
        closeMobileMenu();
      }
    });
  }
  var gallery = document.querySelector('.vehicle-gallery');
  var leftButton = document.getElementById('scroll-left');
  var rightButton = document.getElementById('scroll-right');

  // Only proceed if all elements exist
  if (gallery && leftButton && rightButton) {
    var visibleImages = 4;
    var totalImages = document.querySelectorAll('.gallery-item').length;
    if (totalImages <= visibleImages) {
      leftButton.style.display = 'none';
      rightButton.style.display = 'none';
    }
    var scrollAmount = 0;
    var galleryItem = document.querySelector('.gallery-item');
    var itemWidth = galleryItem ? galleryItem.offsetWidth + 10 : 0; // width + margin-right

    leftButton.addEventListener('click', function () {
      if (scrollAmount > 0) {
        scrollAmount -= itemWidth;
        gallery.style.transform = "translateX(-".concat(scrollAmount, "px)");
      } else {
        // If at the beginning, scroll to the last set of images
        scrollAmount = (totalImages - visibleImages) * itemWidth;
        gallery.style.transform = "translateX(-".concat(scrollAmount, "px)");
      }
    });
    rightButton.addEventListener('click', function () {
      if (scrollAmount < (totalImages - visibleImages) * itemWidth) {
        scrollAmount += itemWidth;
        gallery.style.transform = "translateX(-".concat(scrollAmount, "px)");
      } else {
        // If at the end, scroll back to the first set of images
        scrollAmount = 0;
        gallery.style.transform = "translateX(-".concat(scrollAmount, "px)");
      }
    });
  }

  // Fullscreen Image Modal Functionality
  var modal = document.getElementById('fullscreen-modal');
  var fullscreenImage = document.querySelector('.fullscreen-image');
  var closeButton = document.querySelector('.close-fullscreen');
  var prevButton = document.querySelector('.prev-image');
  var nextButton = document.querySelector('.next-image');
  var galleryImages = document.querySelectorAll('.gallery-image');
  if (modal && fullscreenImage && closeButton && galleryImages.length > 0) {
    var openFullscreen = function openFullscreen(index) {
      currentImageIndex = index;
      fullscreenImage.src = imageUrls[currentImageIndex];
      modal.classList.add('active');
      document.body.style.overflow = 'hidden';
    };
    var closeFullscreen = function closeFullscreen() {
      modal.classList.remove('active');
      document.body.style.overflow = 'auto';
    };
    var showPreviousImage = function showPreviousImage() {
      currentImageIndex = currentImageIndex > 0 ? currentImageIndex - 1 : imageUrls.length - 1;
      fullscreenImage.src = imageUrls[currentImageIndex];
    };
    var showNextImage = function showNextImage() {
      currentImageIndex = currentImageIndex < imageUrls.length - 1 ? currentImageIndex + 1 : 0;
      fullscreenImage.src = imageUrls[currentImageIndex];
    }; // Event listeners for modal controls
    var currentImageIndex = 0;
    var imageUrls = [];

    // Collect all unique image URLs
    galleryImages.forEach(function (img, index) {
      if (index < galleryImages.length / 2) {
        imageUrls.push(img.src);
      }
    });
    galleryImages.forEach(function (img, index) {
      img.addEventListener('click', function () {
        currentImageIndex = index < galleryImages.length / 2 ? index : index - galleryImages.length / 2;
        openFullscreen(currentImageIndex);
      });
    });
    closeButton.addEventListener('click', closeFullscreen);
    if (prevButton) prevButton.addEventListener('click', showPreviousImage);
    if (nextButton) nextButton.addEventListener('click', showNextImage);

    // Close modal when clicking outside the image
    modal.addEventListener('click', function (e) {
      if (e.target === modal) {
        closeFullscreen();
      }
    });

    // Keyboard navigation
    document.addEventListener('keydown', function (e) {
      if (modal.classList.contains('active')) {
        switch (e.key) {
          case 'Escape':
            closeFullscreen();
            break;
          case 'ArrowLeft':
            showPreviousImage();
            break;
          case 'ArrowRight':
            showNextImage();
            break;
        }
      }
    });
  } // End modal null check
});
var filterFabButton = document.querySelector('.filter-fab-button');
var filterOverlay = document.getElementById('mobile-filter-overlay');
var filterSheet = document.getElementById('mobile-filter-sheet');
var filterClose = document.querySelector('.filter-sheet-close');
var filterClearBtn = document.querySelector('.filter-clear-btn');
if (filterSheet && filterOverlay) {
  filterSheet.classList.remove('active');
  filterOverlay.classList.remove('active');
  filterOverlay.style.display = 'none';
  document.body.style.overflow = '';
  if (filterFabButton) {
    filterFabButton.setAttribute('aria-expanded', 'false');
  }
}
if (filterFabButton && filterSheet && filterOverlay) {
  filterFabButton.addEventListener('click', function (e) {
    e.preventDefault();
    e.stopPropagation();
    if (!filterSheet.classList.contains('active')) {
      openFilterSheet();
    }
  });
}
if (filterClose) {
  filterClose.addEventListener('click', function (e) {
    e.preventDefault();
    e.stopPropagation();
    closeFilterSheet();
  });
}
if (filterOverlay) {
  filterOverlay.addEventListener('click', function (e) {
    if (e.target === filterOverlay) {
      closeFilterSheet();
    }
  });
}
if (filterClearBtn) {
  filterClearBtn.addEventListener('click', function () {
    clearAllFilters();
  });
}
var startY = 0;
var currentY = 0;
var isDragging = false;
if (filterSheet) {
  filterSheet.addEventListener('touchstart', function (e) {
    if (e.target.closest('.filter-sheet-header')) {
      startY = e.touches[0].clientY;
      isDragging = true;
      filterSheet.style.transition = 'none';
    }
  });
  filterSheet.addEventListener('touchmove', function (e) {
    if (!isDragging) return;
    currentY = e.touches[0].clientY;
    var deltaY = currentY - startY;
    if (deltaY > 0) {
      filterSheet.style.transform = "translateY(".concat(deltaY, "px)");
    }
  });
  filterSheet.addEventListener('touchend', function (e) {
    if (!isDragging) return;
    isDragging = false;
    filterSheet.style.transition = 'transform 0.3s cubic-bezier(0.4, 0, 0.2, 1)';
    var deltaY = currentY - startY;
    if (deltaY > 100) {
      closeFilterSheet();
    } else {
      filterSheet.style.transform = 'translateY(0)';
    }
  });
}
function openFilterSheet() {
  if (filterOverlay && filterSheet) {
    filterOverlay.style.display = 'block';
    filterSheet.style.visibility = 'visible';
    requestAnimationFrame(function () {
      filterOverlay.classList.add('active');
      filterSheet.classList.add('active');
    });
    document.body.style.overflow = 'hidden';
    if (filterFabButton) {
      filterFabButton.setAttribute('aria-expanded', 'true');
    }
  }
}
function closeFilterSheet() {
  if (filterOverlay && filterSheet) {
    filterSheet.classList.remove('active');
    filterOverlay.classList.remove('active');
    setTimeout(function () {
      if (filterOverlay && !filterOverlay.classList.contains('active')) {
        filterOverlay.style.display = 'none';
      }
      if (filterSheet && !filterSheet.classList.contains('active')) {
        filterSheet.style.visibility = 'hidden';
        filterSheet.style.transform = '';
      }
    }, 300);
    document.body.style.overflow = '';
    if (filterFabButton) {
      filterFabButton.setAttribute('aria-expanded', 'false');
    }
  }
}
function clearAllFilters() {
  var selects = filterSheet.querySelectorAll('select');
  selects.forEach(function (select) {
    select.selectedIndex = 0;
  });
  var checkboxes = filterSheet.querySelectorAll('input[type="checkbox"]');
  checkboxes.forEach(function (checkbox) {
    checkbox.checked = false;
  });
  if (filterClearBtn) {
    var originalText = filterClearBtn.textContent;
    filterClearBtn.textContent = 'Pastruar!';
    filterClearBtn.style.background = '#28a745';
    filterClearBtn.style.transition = 'background 0.3s ease';
    setTimeout(function () {
      filterClearBtn.textContent = originalText;
      filterClearBtn.style.background = '';
    }, 1200);
  }
}
document.addEventListener('keydown', function (e) {
  if (e.key === 'Escape' && filterSheet && filterSheet.classList.contains('active')) {
    closeFilterSheet();
  }
});
function initMarkModelFilter() {
  var markSelect = document.getElementById('mark');
  var modelSelect = document.getElementById('model');
  var mobileMarkSelect = document.getElementById('mobile-mark');
  var mobileModelSelect = document.getElementById('mobile-model');

  // Initialize both desktop and mobile filters
  initFilterPair(markSelect, modelSelect);
  initFilterPair(mobileMarkSelect, mobileModelSelect);
}
function initFilterPair(markSelect, modelSelect) {
  if (!markSelect || !modelSelect) return;
  var allModelOptions = Array.from(modelSelect.querySelectorAll('option')).slice(1);
  function updateModelOptions(selectedMark) {
    var _window$ajaxpaginatio, _window$ajaxpaginatio2;
    var preserveValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
    var valueToPreserve = preserveValue || modelSelect.value;
    var placeholderText = selectedMark ? 'Modeli' : 'Zgjedh marken';
    modelSelect.innerHTML = "<option value=\"\">".concat(placeholderText, "</option>");
    if (!selectedMark) {
      return;
    }
    var formData = new FormData();
    formData.append('action', 'get_models_for_mark');
    formData.append('mark_slug', selectedMark);
    formData.append('nonce', ((_window$ajaxpaginatio = window.ajaxpagination) === null || _window$ajaxpaginatio === void 0 ? void 0 : _window$ajaxpaginatio.nonce) || '');
    fetch(((_window$ajaxpaginatio2 = window.ajaxpagination) === null || _window$ajaxpaginatio2 === void 0 ? void 0 : _window$ajaxpaginatio2.ajaxurl) || '/wp-admin/admin-ajax.php', {
      method: 'POST',
      body: formData
    }).then(function (response) {
      return response.json();
    }).then(function (data) {
      if (data.success && data.data) {
        data.data.forEach(function (model) {
          var option = document.createElement('option');
          option.value = model.slug;
          option.textContent = model.name;
          modelSelect.appendChild(option);
        });
        // Restore preserved value after AJAX update
        if (valueToPreserve) {
          var modelExists = Array.from(modelSelect.options).some(function (option) {
            return option.value === valueToPreserve;
          });
          if (modelExists) {
            modelSelect.value = valueToPreserve;
          }
        }
      }
    })["catch"](function (error) {
      console.error('Error fetching models:', error);
      // Fallback: show filtered models if AJAX fails and mark is selected
      if (selectedMark) {
        allModelOptions.forEach(function (option) {
          modelSelect.appendChild(option.cloneNode(true));
        });
        // Restore preserved value
        if (valueToPreserve) {
          modelSelect.value = valueToPreserve;
        }
      }
    });
  }
  markSelect.addEventListener('change', function () {
    var selectedMark = this.value;
    var currentModelValue = modelSelect.value;
    if (!selectedMark) {
      updateModelOptions(selectedMark, '');
    } else {
      updateModelOptions(selectedMark, currentModelValue);
    }
  });

  // Initialize on page load
  var currentMark = markSelect.value;
  var currentModel = modelSelect.value;
  if (currentMark) {
    updateModelOptions(currentMark, currentModel);
  } else {
    // If no mark is selected, show "Zgjedh marken" placeholder
    updateModelOptions('', '');
  }
}

// Synchronize desktop and mobile filters
function syncFilters() {
  // Desktop to mobile sync
  var desktopSelects = ['mark', 'model', 'year', 'fuel', 'transmission', 'km_from', 'km_to'];
  desktopSelects.forEach(function (selectId) {
    var desktopSelect = document.getElementById(selectId);
    var mobileSelect = document.getElementById('mobile-' + selectId);
    if (desktopSelect && mobileSelect) {
      // Desktop to mobile
      desktopSelect.addEventListener('change', function () {
        mobileSelect.value = this.value;
      });

      // Mobile to desktop
      mobileSelect.addEventListener('change', function () {
        desktopSelect.value = this.value;
      });
    }
  });

  // Sync checkboxes for condition
  var desktopCheckboxes = document.querySelectorAll('input[name="condition[]"]:not([id*="mobile"])');
  var mobileCheckboxes = document.querySelectorAll('input[name="condition[]"][id*="mobile"], .mobile-filter-sheet input[name="condition[]"]');
  desktopCheckboxes.forEach(function (desktopCheckbox, index) {
    var mobileCheckbox = mobileCheckboxes[index];
    if (mobileCheckbox) {
      // Desktop to mobile
      desktopCheckbox.addEventListener('change', function () {
        mobileCheckbox.checked = this.checked;
      });

      // Mobile to desktop
      mobileCheckbox.addEventListener('change', function () {
        desktopCheckbox.checked = this.checked;
      });
    }
  });
}

// Initialize mark/model filter
initMarkModelFilter();

// Initialize filter synchronization
syncFilters();

/***/ }),

/***/ "./assets/scss/main.scss":
/*!*******************************!*\
  !*** ./assets/scss/main.scss ***!
  \*******************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = __webpack_modules__;
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/chunk loaded */
/******/ 	!function() {
/******/ 		var deferred = [];
/******/ 		__webpack_require__.O = function(result, chunkIds, fn, priority) {
/******/ 			if(chunkIds) {
/******/ 				priority = priority || 0;
/******/ 				for(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];
/******/ 				deferred[i] = [chunkIds, fn, priority];
/******/ 				return;
/******/ 			}
/******/ 			var notFulfilled = Infinity;
/******/ 			for (var i = 0; i < deferred.length; i++) {
/******/ 				var chunkIds = deferred[i][0];
/******/ 				var fn = deferred[i][1];
/******/ 				var priority = deferred[i][2];
/******/ 				var fulfilled = true;
/******/ 				for (var j = 0; j < chunkIds.length; j++) {
/******/ 					if ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {
/******/ 						chunkIds.splice(j--, 1);
/******/ 					} else {
/******/ 						fulfilled = false;
/******/ 						if(priority < notFulfilled) notFulfilled = priority;
/******/ 					}
/******/ 				}
/******/ 				if(fulfilled) {
/******/ 					deferred.splice(i--, 1)
/******/ 					var r = fn();
/******/ 					if (r !== undefined) result = r;
/******/ 				}
/******/ 			}
/******/ 			return result;
/******/ 		};
/******/ 	}();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	!function() {
/******/ 		__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }
/******/ 	}();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	!function() {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = function(exports) {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	}();
/******/ 	
/******/ 	/* webpack/runtime/jsonp chunk loading */
/******/ 	!function() {
/******/ 		// no baseURI
/******/ 		
/******/ 		// object to store loaded and loading chunks
/******/ 		// undefined = chunk not loaded, null = chunk preloaded/prefetched
/******/ 		// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded
/******/ 		var installedChunks = {
/******/ 			"/assets/prod/scripts.min": 0,
/******/ 			"assets/prod/style": 0
/******/ 		};
/******/ 		
/******/ 		// no chunk on demand loading
/******/ 		
/******/ 		// no prefetching
/******/ 		
/******/ 		// no preloaded
/******/ 		
/******/ 		// no HMR
/******/ 		
/******/ 		// no HMR manifest
/******/ 		
/******/ 		__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };
/******/ 		
/******/ 		// install a JSONP callback for chunk loading
/******/ 		var webpackJsonpCallback = function(parentChunkLoadingFunction, data) {
/******/ 			var chunkIds = data[0];
/******/ 			var moreModules = data[1];
/******/ 			var runtime = data[2];
/******/ 			// add "moreModules" to the modules object,
/******/ 			// then flag all "chunkIds" as loaded and fire callback
/******/ 			var moduleId, chunkId, i = 0;
/******/ 			if(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {
/******/ 				for(moduleId in moreModules) {
/******/ 					if(__webpack_require__.o(moreModules, moduleId)) {
/******/ 						__webpack_require__.m[moduleId] = moreModules[moduleId];
/******/ 					}
/******/ 				}
/******/ 				if(runtime) var result = runtime(__webpack_require__);
/******/ 			}
/******/ 			if(parentChunkLoadingFunction) parentChunkLoadingFunction(data);
/******/ 			for(;i < chunkIds.length; i++) {
/******/ 				chunkId = chunkIds[i];
/******/ 				if(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {
/******/ 					installedChunks[chunkId][0]();
/******/ 				}
/******/ 				installedChunks[chunkId] = 0;
/******/ 			}
/******/ 			return __webpack_require__.O(result);
/******/ 		}
/******/ 		
/******/ 		var chunkLoadingGlobal = self["webpackChunkunderscores"] = self["webpackChunkunderscores"] || [];
/******/ 		chunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));
/******/ 		chunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));
/******/ 	}();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module depends on other loaded chunks and execution need to be delayed
/******/ 	__webpack_require__.O(undefined, ["assets/prod/style"], function() { return __webpack_require__("./assets/js/scripts.js"); })
/******/ 	var __webpack_exports__ = __webpack_require__.O(undefined, ["assets/prod/style"], function() { return __webpack_require__("./assets/scss/main.scss"); })
/******/ 	__webpack_exports__ = __webpack_require__.O(__webpack_exports__);
/******/ 	
/******/ })()
;